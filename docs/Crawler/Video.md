# 全站视频爬虫

## VideoRange

全站视频爬虫依据 AV 号遍历所有视频.

当然你也可以不指定, 不指定会直接塞进 `$UserBaseDirectory`, 提醒你一下这个文件夹一般是在C盘的...

截止2018年上半年, B站视频ID总计有2600W, 其中有效ID号大约1800W.

![文件大小.png](https://i.loli.net/2018/07/15/5b4ad7fd497f9.png)

CPU的内核数记为 X , 开启的内核越多速度越快, 但是相应每个内核的效率就越低

一般使用 4X 的内核, 6X 仍然能有少量提升, 但是内存占用就很高了, 8X 的话基本就得不偿失了.

一般来说要爬取一个小时左右, 速度大约是每秒 5400 条记录.



![运行时间](https://i.loli.net/2018/07/15/5b4ad7fd5112a.png)

## Database


当然这还没完, 只是下载了所有页面而已,

把额外的内核全关了, 因为 mongodb 的端口就那点带宽, 线程开了好几个也是堵着.

![插入速度](https://i.loli.net/2018/07/15/5b4ad7fd51a0e.png)

